# 基于统计

目的：找到 query 对应的 类目。 

做法：某个 query 对应的 点击/购买/加购 的所有商品的类目。通过阈值或者规则 找到主要类目。

优化：query对应的类目可以进行时间衰减，最近行为权重更高。短session内更换query，最后的query权重更高。

优化：长尾query，可以合并到同session的头部query的类目预测中。



# 基于内容

基于内容的类目预测有无监督和有监督两种方式。



有监督文本分类：

有监督方式则基于人工标注数据或基于点击行为的弱监督数据，通过文本分类的方法训练类目预测模型。



其中，无监督方式可以通过贝叶斯统计、互信息、LDA等方式从商品内容中聚合得到类目关键词及其权重，

对query term按各类目下的关键词进行加权求和，得到高置信的类目预测结果。



同样对于长尾的query，基于内容的方法可以通过丢词、关键词匹配、编辑距离、word2vec距离等方式映射到头部query，得到其类目预测结果。此外基于头部query训练的分类模型，往往也可以有足够的泛化能力适应长尾query。



# 基于特征融合

基于统计和内容的方式可以产出很多帮助 query类目预测 的统计特征或文本特征，而基于众多的特征再训练一个分类器（如LR/GBDT/DNN等）进行特征融合，往往可以更加准确的预测query类目。这种特征融合的模型可作为一个判别器，进一步判断基于统计和内容方法得到的类目候选是否准确。常见的特征如：

- Query点击、加购、成交等行为商品类目统计频次/概率、Query下所有类目的归一化分布、比例等。
- Query召回类目下的商品数、占Query的商品数比例、占类目下的总商品比例。
- 类目所属的一级类目、领域等。
- Query成交价格和商品类目成交价格匹配程度。
- 子模型分数，如基于文本内容的类目预测模型的预测分数。
- Query词命中类目关键词分布加权分数



类目预测query相关性，保证商品召回的相关性，提升用户的搜索体验。但针对搜索query的类目预测存在较多的问题：

\1. query长度较短，包含信息太少。

\2. 一个query往往不一定只与一个类目相关，其可能与多个类目相关

\3. 长尾搜索query较多，较难统计归类

\4. 类目上流量马太效应严重，存在较多类目流量较少。

\5. 类目一般分为多级，越靠近叶子节点，预测难度越大。

\6. 类目间存在重叠情况，本身区分难度较大。例如毛衣和针织衫



https://www.cnblogs.com/Lee-yl/p/11163222.html

https://zhuanlan.zhihu.com/p/112719984

https://developer.aliyun.com/article/420506

https://zhuanlan.zhihu.com/p/90923697









